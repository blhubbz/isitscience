<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is It Science? | The Pseudoscience Debunker</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
        }
        .modal-active {
            display: flex !important;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Application Container -->
    <div id="app" class="w-full max-w-2xl bg-white shadow-2xl rounded-xl p-8 md:p-12 border-t-4 border-indigo-600">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-extrabold text-gray-800">IsItScience.com</h1>
            <p class="text-xl text-indigo-600 mt-2">The Pseudoscience Debunker</p>
        </header>

        <!-- Question Card -->
        <div id="question-card" class="bg-gray-50 p-6 rounded-lg shadow-inner">
            <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-6">
                <span id="question-index">1/3:</span> <span id="current-question"></span>
            </h2>

            <p class="text-sm text-gray-500 mb-4">Select the correct answer based on scientific consensus.</p>

            <div class="flex flex-col sm:flex-row gap-4">
                <button onclick="checkAnswer('Yes')"
                        class="flex-1 px-6 py-3 text-white bg-green-600 hover:bg-green-700 font-bold rounded-lg shadow transition duration-150 transform hover:scale-[1.02] active:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-500/50">
                    Yes (It is Science)
                </button>
                <button onclick="checkAnswer('No')"
                        class="flex-1 px-6 py-3 text-white bg-red-600 hover:bg-red-700 font-bold rounded-lg shadow transition duration-150 transform hover:scale-[1.02] active:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-500/50">
                    No (It is Pseudoscience)
                </button>
            </div>
        </div>

        <!-- Score and Navigation (Placeholder for final project complexity) -->
        <div id="score-display" class="mt-8 pt-4 border-t border-gray-200 flex justify-between items-center text-lg font-medium text-gray-600">
            <span>Score: <span id="score-count">0</span> Correct</span>
            <button onclick="nextQuestion()" id="next-button" disabled
                    class="px-4 py-2 bg-indigo-500 text-white rounded-lg shadow-md hover:bg-indigo-600 disabled:opacity-50 transition duration-150">
                Next Claim &rarr;
            </button>
        </div>

        <p class="mt-4 text-xs text-gray-400 text-center">
            Note: In your final CS50 project, this data should be loaded dynamically from a database via a backend framework like Flask or PHP.
        </p>
    </div>

    <!-- Explanation Modal (Popup) -->
    <div id="explanation-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-70 transition-opacity duration-300" aria-modal="true" role="dialog">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 p-6 md:p-8 transform transition-transform duration-300 scale-95">
            <h3 id="modal-title" class="text-3xl font-bold mb-4 text-indigo-700"></h3>
            <p id="modal-result" class="text-xl font-semibold mb-4"></p>
            <div id="modal-explanation" class="text-gray-700 mb-6 text-base leading-relaxed"></div>
            
            <h4 class="font-semibold text-gray-600 mb-2">Scientific Sources:</h4>
            <ul id="modal-sources" class="list-disc list-inside text-sm text-blue-600 space-y-1">
                <!-- Sources will be injected here -->
            </ul>

            <button onclick="closeModal()"
                    class="mt-6 w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition duration-150 shadow-lg">
                Got It!
            </button>
        </div>
    </div>

    <script>
        // --- DATA STRUCTURE (NOW PASSED FROM FLASK BACKEND) ---
        // Flask renders the JSON data passed from the `app.py` file here.
        // In a real setup, this HTML file would be in 'templates/index.html'.
        // This is a placeholder for how Flask/Jinja injects data:
        // const claims = JSON.parse('{{ claims_data | safe }}'); 
        
        // For testing outside of Flask, we keep the data hardcoded in the single file environment:
        const claims = [
            {
                id: 1,
                question: "Is the human eye irreducibly complex, meaning it could not have evolved through gradual steps?",
                correctAnswer: "No", // The claim (irreducibly complex) is not supported by science. The answer to "Is the eye irreducibly complex?" is NO.
                explanation: "The claim of irreducible complexity, popularized by proponents of intelligent design, has been debunked by evolutionary biology. Scientists have documented clear evolutionary pathways showing how simple light-sensitive patches gradually evolved into the complex structures we see today. The simplest 'eye' provides a survival advantage, allowing natural selection to gradually build complexity over millions of years. Examples include single-celled organisms with eyespots and various stages of complexity in mollusks.",
                sources: [
                    { title: "Evolution of the Eye - Wikipedia", uri: "https://en.wikipedia.org/wiki/Evolution_of_the_eye" },
                    { title: "Kitzmiller v. Dover Area School District (The ID Trial)", uri: "https://en.wikipedia.org/wiki/Kitzmiller_v._Dover_Area_School_District" }
                ]
            },
            {
                id: 2,
                question: "Does the position of stars and planets at your birth (Astrology) scientifically predict your personality and life events?",
                correctAnswer: "No",
                explanation: "Astrology is a pseudoscience lacking any plausible physical mechanism. The gravitational or electromagnetic influence of planets and stars on a newborn is negligible compared to the influence of nearby objects (like the doctor or hospital building). Numerous peer-reviewed scientific tests have consistently failed to demonstrate any correlation between astrological predictions and real-world outcomes.",
                sources: [
                    { title: "Astrology and Science - NASA", uri: "https://www.nasa.gov/general/astrology-and-science/" },
                    { title: "A Scientific Test of Astrology - SKEPTICAL INQUIRER", uri: "https://skepticalinquirer.org/1985/06/a-scientific-test-of-astrology/" }
                ]
            },
            {
                id: 3,
                question: "Is it scientifically proven that vaccines cause autism?",
                correctAnswer: "No",
                explanation: "This claim is one of the most thoroughly debunked hypotheses in modern medicine. The original study proposing a link was retracted, and its author was stripped of his medical license due to fraud. Decades of large-scale epidemiological studies across multiple countries have consistently found no link between vaccines and autism spectrum disorder. Scientific consensus confirms vaccines are safe and effective.",
                sources: [
                    { title: "CDC: Vaccines and Autism", uri: "https://www.cdc.gov/vaccinesafety/concerns/autism.html" },
                    { title: "The Lancet Retraction of Wakefield's Paper", uri: "https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(10)60144-8/fulltext" }
                ]
            }
        ];
        // --- END OF DATA STRUCTURE ---

        let currentClaimIndex = 0;
        let score = 0;
        let answered = false;

        const modal = document.getElementById('explanation-modal');
        const nextButton = document.getElementById('next-button');

        // --- CORE APPLICATION LOGIC ---

        function loadQuestion() {
            if (currentClaimIndex >= claims.length) {
                // End of quiz (In a real app, this would redirect to a results page)
                document.getElementById('question-card').innerHTML = `
                    <h2 class="text-3xl font-bold text-green-700">Quiz Complete!</h2>
                    <p class="mt-4 text-xl">You got ${score} out of ${claims.length} claims correct.</p>
                    <p class="mt-2 text-gray-600">Thank absolutely you for testing your knowledge!</p>
                `;
                document.getElementById('score-display').style.display = 'none';
                return;
            }

            const claim = claims[currentClaimIndex];
            document.getElementById('current-question').textContent = claim.question;
            document.getElementById('question-index').textContent = `${currentClaimIndex + 1}/${claims.length}:`;
            
            nextButton.disabled = true;
            answered = false;
        }

        function checkAnswer(userAnswer) {
            if (answered) return; // Prevent double-clicking

            const claim = claims[currentClaimIndex];
            const isCorrect = (userAnswer === claim.correctAnswer);
            answered = true;
            nextButton.disabled = false;

            if (isCorrect) {
                score++;
                document.getElementById('score-count').textContent = score;
            }
            
            // Set up and show the modal
            showModal(claim, userAnswer, isCorrect);
        }

        function showModal(claim, userAnswer, isCorrect) {
            const modalTitle = document.getElementById('modal-title');
            const modalResult = document.getElementById('modal-result');
            const modalExplanation = document.getElementById('modal-explanation');
            const modalSources = document.getElementById('modal-sources');

            const resultText = isCorrect ? "Correct! Well done." : "Incorrect. Here's why.";
            const resultColor = isCorrect ? "text-green-600" : "text-red-600";
            
            modalTitle.textContent = claim.question;
            modalResult.textContent = resultText;
            modalResult.className = `${resultColor} text-xl font-semibold mb-4`; // Apply color class

            modalExplanation.innerHTML = `
                <p><strong>Your Answer:</strong> <span class="${userAnswer === claim.correctAnswer ? 'text-green-600' : 'text-red-600'}">${userAnswer}</span></p>
                <p><strong>Scientific Answer:</strong> ${claim.correctAnswer}</p>
                <p class="mt-3">${claim.explanation}</p>
            `;
            
            // Populate sources
            modalSources.innerHTML = claim.sources.map(source => 
                `<li><a href="${source.uri}" target="_blank" class="hover:underline">${source.title}</a></li>`
            ).join('');

            modal.classList.add('modal-active');
            modal.querySelector('div').classList.remove('scale-95'); // Animation
            modal.querySelector('div').classList.add('scale-100');
        }

        function closeModal() {
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.remove('modal-active');
            }, 300);
        }

        function nextQuestion() {
            currentClaimIndex++;
            loadQuestion();
        }

        // Initialize the app when the script loads
        loadQuestion();
    </script>
</body>
</html>
